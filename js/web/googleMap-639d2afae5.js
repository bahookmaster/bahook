function initMap(){function e(e){markerNew=new google.maps.Marker({position:e,map:o,animation:google.maps.Animation.DROP,draggable:!0}),void 0!=oldMarker&&oldMarker.setMap(null),void 0!=n&&n.setMap(null),oldMarker=markerNew,o.setCenter(e);var a=markerNew.getPosition().lat(),t=markerNew.getPosition().lng();$("#lat").val(a),$("#lng").val(t),google.maps.event.addListener(markerNew,"position_changed",function(){var e=markerNew.getPosition().lat(),o=markerNew.getPosition().lng();$("#lat").val(e),$("#lng").val(o)})}var o=new google.maps.Map(document.getElementById("map-canvas"),{center:{lat:lat,lng:lng},zoom:12});if(""!=latitute&&""!=lngitute){var n=new google.maps.Marker({position:{lat:lat,lng:lng},map:o,draggable:!0}),a=new google.maps.places.SearchBox(document.getElementById("searchmap"));google.maps.event.addListener(a,"places_changed",function(){var e,t,l=a.getPlaces(),i=new google.maps.LatLngBounds;for(e=0;t=l[e];e++)i.extend(t.geometry.location),n.setPosition(t.geometry.location);o.fitBounds(i),o.setZoom(12)}),google.maps.event.addListener(n,"position_changed",function(){var e=n.getPosition().lat(),o=n.getPosition().lng();$("#lat").val(e),$("#lng").val(o)}),google.maps.event.addListener(o,"click",function(o){e(o.latLng)})}else infoWindow=new google.maps.InfoWindow,navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){function n(e){markerNew=new google.maps.Marker({position:e,map:o,animation:google.maps.Animation.DROP,draggable:!0}),void 0!=oldMarker&&oldMarker.setMap(null),void 0!=t&&t.setMap(null),oldMarker=markerNew,o.setCenter(e);var n=markerNew.getPosition().lat(),a=markerNew.getPosition().lng();$("#lat").val(n),$("#lng").val(a),google.maps.event.addListener(markerNew,"position_changed",function(){var e=markerNew.getPosition().lat(),o=markerNew.getPosition().lng();$("#lat").val(e),$("#lng").val(o)})}var a={lat:e.coords.latitude,lng:e.coords.longitude},t=new google.maps.Marker({position:{lat:e.coords.latitude,lng:e.coords.longitude},map:o,draggable:!0,mapTypeId:google.maps.MapTypeId.ROADMAP,streetViewControl:!1,mapTypeControl:!1});google.maps.event.addListener(t,"position_changed",function(){var e=t.getPosition().lat(),o=t.getPosition().lng();$("#lat").val(e),$("#lng").val(o)}),google.maps.event.addListener(o,"click",function(e){n(e.latLng)}),infoWindow.setPosition(a),infoWindow.setContent("Location found."),infoWindow.open(o),o.setCenter(a)},function(){handleLocationError(!0,infoWindow,o.getCenter())}):handleLocationError(!1,infoWindow,o.getCenter())}var latitute=$("#lat").val(),lngitute=$("#lng").val();if(""!=latitute&&""!=lngitute)var lat=Number(latitute),lng=Number(lngitute);else var lat=35.837850811893915,lng=50.945327148437514;var map,infoWindow,oldMarker;