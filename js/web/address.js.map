{"version":3,"sources":["address.js","googleMap.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"address.js","sourcesContent":["$('.select3').select2({\r\n    \"language\": \"fa\",\r\n    dropdownAutoWidth: 'true'\r\n});\r\n$('#state_id').on('change', function () {\r\n    var state_id = $(this).find('option:selected').val();\r\n    $.get('{{URL::to('/api/main/cities/')}}/' + state_id, function (data) {\r\n        $('#city_id').html('<option value=\"\" selected>لطفا شهر را انتخاب کنید ...</option>');\r\n        $('#city_id').select2({\r\n            data: data.city\r\n        });\r\n        $('#tel').val(data.areacode);\r\n    });\r\n});\r\n$(document).ready(function() {\r\n//        $('#city_id').on('select2:opening', function () {\r\n//            event.preventDefault();\r\n    var state_id = $('#state_id').find('option:selected').val();\r\n    var city_id = $('#city_id').find('option:selected').val();\r\n    var location_id = $('#location_id').find('option:selected').val();\r\n    console.log(state_id,city_id,location_id);\r\n    if(state_id && city_id) {\r\n        event.preventDefault();\r\n        $.get('{{URL::to('/api/main/cities/')}}/' + state_id, function (data) {\r\n            $('#city_id').html('<option value=\"'+city_id+'\" selected>شهر</option>');\r\n            $('#city_id').select2({\r\n                data: data.city\r\n            });\r\n//                    $('#tel').val(data.areacode);\r\n        });\r\n        if(location_id) {\r\n            $.get('{{URL::to('/api/main/areacode/')}}/' + city_id, function (data) {\r\n                $('#location_id').html('<option value=\"'+location_id+'\" selected>انتخاب محله</option>');\r\n                $('#location_id').select2({\r\n                    data: data.location\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n});\r\n\r\n$('#city_id').on('change', function () {\r\n    var city_id = $(this).find('option:selected').val();\r\n    $.get('{{URL::to('/api/main/areacode/')}}/' + city_id, function (data) {\r\n        $('#location_id').html('<option value=\"\" selected>لطفا محله را انتخاب کنید ...</option>');\r\n        $('#tel').val(data.areacode);\r\n\r\n        $('#location_id').select2({\r\n            data: data.location\r\n        });\r\n    });\r\n});\r\n\r\n\r\n$.fn.modal.Constructor.prototype.enforceFocus = function () {\r\n};","var latitute = $('#lat').val();\r\nvar lngitute = $('#lng').val();\r\nif(latitute != '' && lngitute != ''){\r\n    var lat = Number(latitute);\r\n    var lng = Number(lngitute);\r\n}else{\r\n    var lat = 35.837850811893915;\r\n    var lng = 50.945327148437514;\r\n}\r\n\r\n\r\n\r\nvar map, infoWindow;\r\nvar oldMarker;\r\n\r\n\r\nfunction initMap() {\r\n\r\n    var map = new google.maps.Map(document.getElementById('map-canvas'),\r\n        {\r\n            center : {\r\n//                                lat : 35.837850811893915,\r\n//                                lng : 50.945327148437514\r\n                lat : lat,\r\n                lng : lng\r\n            },\r\n            zoom : 12\r\n        });\r\n\r\n\r\n\r\n    if(latitute != '' && lngitute != '') {\r\n        console.log('ok');\r\n\r\n        var marker = new google.maps.Marker({\r\n            position: {\r\n                //                        lat : 35.837850811893915,\r\n                //                        lng : 50.945327148437514\r\n                lat: lat,\r\n                lng: lng\r\n            },\r\n            map: map,\r\n            draggable: true\r\n        });\r\n\r\n        var searchBox = new google.maps.places.SearchBox(document.getElementById('searchmap'));\r\n\r\n        google.maps.event.addListener(searchBox, 'places_changed', function () {\r\n            var places = searchBox.getPlaces();\r\n\r\n            var bounds = new google.maps.LatLngBounds();\r\n            var i, place;\r\n            for (i = 0; place = places[i]; i++) {\r\n                bounds.extend(place.geometry.location);\r\n                marker.setPosition(place.geometry.location);\r\n            }\r\n            map.fitBounds(bounds);\r\n            map.setZoom(12);\r\n        });\r\n        google.maps.event.addListener(marker, 'position_changed', function () {\r\n            var lat = marker.getPosition().lat();\r\n            var lng = marker.getPosition().lng();\r\n            $('#lat').val(lat);\r\n            $('#lng').val(lng);\r\n        });\r\n        google.maps.event.addListener(map, 'click', function(event) {\r\n            placeMarker(event.latLng);\r\n        });\r\n\r\n        function placeMarker(location) {\r\n\r\n            markerNew = new google.maps.Marker({\r\n                position: location,\r\n                map: map,\r\n                animation: google.maps.Animation.DROP,\r\n                draggable : true,\r\n            });\r\n\r\n            if (oldMarker != undefined){\r\n                oldMarker.setMap(null);\r\n            }\r\n            if( marker != undefined){\r\n                marker.setMap(null);\r\n            }\r\n            // oldMarker = marker;\r\n            oldMarker = markerNew;\r\n            map.setCenter(location);\r\n            var lat = markerNew.getPosition().lat();\r\n            var lng = markerNew.getPosition().lng();\r\n            $('#lat').val(lat);\r\n            $('#lng').val(lng);\r\n\r\n            google.maps.event.addListener(markerNew, 'position_changed', function () {\r\n                var lat = markerNew.getPosition().lat();\r\n                var lng = markerNew.getPosition().lng();\r\n                $('#lat').val(lat);\r\n                $('#lng').val(lng);\r\n            });\r\n\r\n\r\n        }\r\n\r\n    }else {\r\n        console.log('no');\r\n\r\n        infoWindow = new google.maps.InfoWindow;\r\n\r\n        // Try HTML5 geolocation.\r\n        if (navigator.geolocation) {\r\n            navigator.geolocation.getCurrentPosition(function(position) {\r\n                var pos = {\r\n                    lat: position.coords.latitude,\r\n                    lng: position.coords.longitude\r\n                };\r\n                var marker = new google.maps.Marker({\r\n                    position: {\r\n                        lat : position.coords.latitude,\r\n                        lng : position.coords.longitude\r\n                    },\r\n                    map: map,\r\n                    draggable : true,\r\n                    mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n                    streetViewControl: false,\r\n                    mapTypeControl: false,\r\n                });\r\n\r\n                google.maps.event.addListener(marker, 'position_changed', function () {\r\n                    var lat = marker.getPosition().lat();\r\n                    var lng = marker.getPosition().lng();\r\n                    $('#lat').val(lat);\r\n                    $('#lng').val(lng);\r\n                });\r\n\r\n\r\n                /////////////////////////////////////\r\n                google.maps.event.addListener(map, 'click', function(event) {\r\n                    placeMarker(event.latLng);\r\n                });\r\n\r\n                function placeMarker(location) {\r\n\r\n                    markerNew = new google.maps.Marker({\r\n                        position: location,\r\n                        map: map,\r\n                        animation: google.maps.Animation.DROP,\r\n                        draggable : true,\r\n                    });\r\n\r\n                    if (oldMarker != undefined){\r\n                        oldMarker.setMap(null);\r\n                    }\r\n                    if( marker != undefined){\r\n                        marker.setMap(null);\r\n                    }\r\n                    // oldMarker = marker;\r\n                    oldMarker = markerNew;\r\n                    map.setCenter(location);\r\n                    var lat = markerNew.getPosition().lat();\r\n                    var lng = markerNew.getPosition().lng();\r\n                    $('#lat').val(lat);\r\n                    $('#lng').val(lng);\r\n\r\n                    google.maps.event.addListener(markerNew, 'position_changed', function () {\r\n                        var lat = markerNew.getPosition().lat();\r\n                        var lng = markerNew.getPosition().lng();\r\n                        $('#lat').val(lat);\r\n                        $('#lng').val(lng);\r\n                    });\r\n\r\n\r\n                }\r\n\r\n                // google.maps.event.addListener(map, 'click', function(event) {\r\n                //     placeMarker(event.latLng);\r\n                // });\r\n                //\r\n                // function placeMarker(location) {\r\n                //\r\n                //     var markerNew = new google.maps.Marker({\r\n                //         position: location,\r\n                //         map: map,\r\n                //         animation: google.maps.Animation.DROP,\r\n                //         draggable : true\r\n                //     });\r\n                //     map.setCenter(location);\r\n                //\r\n                //     google.maps.event.addListener(markerNew, 'position_changed', function () {\r\n                //         var lat = markerNew.getPosition().lat();\r\n                //         var lng = markerNew.getPosition().lng();\r\n                //         $('#lat').val(lat);\r\n                //         $('#lng').val(lng);\r\n                //     });\r\n                //\r\n                // }\r\n\r\n\r\n\r\n                //////////////////////////////////////\r\n\r\n                infoWindow.setPosition(pos);\r\n                infoWindow.setContent('Location found.');\r\n                infoWindow.open(map);\r\n                map.setCenter(pos);\r\n            }, function() {\r\n                handleLocationError(true, infoWindow, map.getCenter());\r\n            });\r\n        } else {\r\n            // Browser doesn't support Geolocation\r\n            handleLocationError(false, infoWindow, map.getCenter());\r\n        }\r\n\r\n    }\r\n\r\n}\r\n"]}