Selectize.define("preserve_on_blur",function(i){var t=this;i.text=i.text||function(i){return i[this.settings.labelField]},this.onBlur=function(i){var e=t.onBlur;return function(i){var t=this.$control_input,a=t.val();e.apply(this,i),this.setTextboxValue(a)}}()}),$(document).ready(function(){function i(i,t,e){var a;return function(){var s=this,o=arguments,h=function(){a=null,e||i.apply(s,o)},l=e&&!a;clearTimeout(a),a=setTimeout(h,t),l&&i.apply(s,o)}}function t(i,t,e,a,s,o,h){$.ajax({type:"POST",url:i,data:{search_term:$("#input-tags6").val().replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,""),field:t},success:function(i){for(var e=[],l="",n=!1,r=0;r<i.total;r++)if(i[t].hits.hits[r])if(0===e.length)e.push({name:i[t].hits.hits[r]._source.name,lName:i[t].hits.hits[r]._source.lName,nameHighlight:i[t].hits.hits[r].highlight.name?i[t].hits.hits[r].highlight.name[0]:void 0,lNameHighlight:i[t].hits.hits[r].highlight.lName?i[t].hits.hits[r].highlight.lName[0]:void 0,id:i[t].hits.hits[r]._id,count:1});else{for(var c=0;c<e.length;c++)if(e[c].name===i[t].hits.hits[r]._source.name||e[c].name===i[t].hits.hits[r]._source.lName){e[c].count+=1,n=!0;break}n||e.push({name:i[t].hits.hits[r]._source.name,lName:i[t].hits.hits[r]._source.lName,nameHighlight:i[t].hits.hits[r].highlight.name?i[t].hits.hits[r].highlight.name[0]:void 0,lNameHighlight:i[t].hits.hits[r].highlight.lName?i[t].hits.hits[r].highlight.lName[0]:void 0,id:i[t].hits.hits[r]._id,count:1}),n=!1}for(var r=0;r<e.length;r++)l+=o?"<li style='border-bottom: 1px dashed #eee;padding-bottom: 5px;'>      <a style='font-size: 13px;color: #14365d;font-weight: bold;'        href='/shelf?cat="+h+"&page=1&per_page=20&q["+o+"][0]="+e[r].id+"'>    "+(void 0===e[r].nameHighlight?e[r].nameHighlight||e[r].name:e[r].nameHighlight)+"</li>":e[r].count>1?"<li style='border-bottom: 1px dashed #eee;padding-bottom: 5px;'>   <a style='padding-left: 5px;font-size: 13px;color: #14365d;font-weight: bold;' href='/search?search="+(e[r].name||e[r].lName)+"'>    "+(void 0===e[r].nameHighlight?e[r].lNameHighlight||e[r].name:e[r].nameHighlight)+"</a><span class='badge' style='vertical-align: initial;    background-color: #ae0000;' >"+(e[r].count>99?99:e[r].count)+"</span></li>":"<li style='border-bottom: 1px dashed #eee;padding-bottom: 5px;'>   <a style='font-size: 13px;color: #14365d;font-weight: bold;' href='"+a+e[r].id+"'> "+(void 0===e[r].nameHighlight?e[r].lNameHighlight||e[r].name:e[r].nameHighlight)+"</a></li>";$("#"+s).html("<ul style='line-height: 25px;'>"+l+"</ul>"),$("#input-tags6").val()?$("#searchBox").fadeIn("slow"):$("#searchBox").fadeOut("500")}})}function e(){$("#input-tags6").val().replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"").trim()&&($("#searchPreview_Main").css("display","none"),$("#searchPreview_Product").css("display","none"),$("#searchPreview_writingTools").css("display","none"),1==$("#searchFilterSelect").val()?($("#searchPreview_Main").css("display","block"),t("/admin/api/searchProducts","products","محصول","/product/","main_books"),t("/admin/api/searchWritingTools","writingtools","محصول","/product/","main_writingtools")):2==$("#searchFilterSelect").val()?($("#searchPreview_Product").css("display","block"),t("/admin/api/searchProducts","products","محصول","/product/","product_products"),t("/admin/api/searchPerson","persons","نویسنده","/","product_persons",6,2),t("/admin/api/searchPublisher","publishers","ناشر","/","product_publishers",8,2)):2999==$("#searchFilterSelect").val()&&($("#searchPreview_writingTools").css("display","block"),t("/admin/api/searchWritingTools","writingtools","محصول","/product/","writingTool_writingTool"),t("/admin/api/searchProducer","producers","محصول","/","writingTool_producer",63,2999)))}localStorage.getItem("showSearchHint")||$("#input-tags6").popover(),$("#input-tags6").blur(function(){$("#input-tags6").popover("disable")}),$("#input-tags6").keyup(i(e,700)),$("#searchForm").click(function(i){$("#input-tags6").val()&&($("#searchBox").fadeIn("slow"),i.stopPropagation())}),$("body").click(function(){$("#searchBox").fadeOut("500")}),$("#show_more_search").click(function(){$("#searchSubmit").click()}),$("#searchFilterSelect").on("change",function(){localStorage.showSearchHint=!0,$("#input-tags6").popover("disable"),e()})});